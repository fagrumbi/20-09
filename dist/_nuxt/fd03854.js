(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{579:function(t,e,o){"use strict";o.r(e);var r=o(6),n=(o(55),o(21),o(10),o(26),o(27),o(450),o(451),o(175),{layout:"admin-dashboard",data:function(){return{identificationFilePreview:"",isPdf:!1,processing:!1,docfileError:null,form:{amount:"",wallet:"",proof:""}}},methods:{handleCryptoDeposit:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var o,r,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.processing=!0,o=JSON.parse(sessionStorage.getItem("auth")),e.prev=3,e.next=7,fetch("https://fidelityvalues.onrender.com/graphql/query",{method:"POST",headers:{"content-type":"application/json",authorization:"Bearer "+o},body:JSON.stringify({query:"\n          mutation newTransaction($input: NewTransaction!) {\n            newTransaction(input: $input)\n          }\n        ",variables:{input:{amount:t.form.amount,wallet:t.form.wallet,transactionType:"deposit",proof:t.form.proof}}})});case 7:return r=e.sent,e.next=10,r.json();case 10:null!=(data=e.sent)&&data.errors?t.$toastr.e(data.errors[0].message):(t.$toastr.s("You have successfully initiated a crypto deposit"),t.form.amount,t.form.wallet,t.form.proof,t.$emit("cryptoDepositSuccess"));case 12:return e.prev=12,t.processing=!1,e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[3,,12,15]])})))()},handleMeansOfIdentificationUpload:function(t){var e=this,o=t.target.files[0];if(o){if(o.size>5242880)return void(this.docfileError="File is too large. Please upload a file smaller than 5MB.");this.docfileError=null;var r=o.type;if(this.isPdf="application/pdf"===r,this.isPdf||"image/png"===r||"image/jpeg"===r||"image/gif"===r){this.identificationFilePreview=URL.createObjectURL(o);var n=new FileReader;n.onload=function(){e.form.proof=n.result},n.readAsDataURL(o)}else this.docfileError="Unsupported file type. Please upload a PDF, PNG, JPG, or GIF file."}}},computed:{isFormEmpty:function(){return!!(this.form.amount&&this.form.wallet&&this.form.proof)}},beforeDestroy:function(){this.identificationFilePreview&&URL.revokeObjectURL(this.identificationFilePreview)}}),l=o(16),component=Object(l.a)(n,(function(){var t=this,e=t._self._c;return e("form",{staticClass:"space-y-6 p-4",on:{submit:function(e){return e.preventDefault(),t.handleCryptoDeposit.apply(null,arguments)}}},[e("div",[e("label",{staticClass:"block text-sm font-medium leading-6 text-gray-900",attrs:{for:"deposit-amount"}},[t._v("Amount")]),t._v(" "),e("div",{staticClass:"mt-2"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.amount,expression:"form.amount"}],staticClass:"block w-full rounded-md py-2.5 px-2.5 text-gray-900 shadow-sm placeholder:text-gray-400 border-[0.6px] bg-gray-100 border-gray-500 sm:text-sm sm:leading-6",attrs:{id:"deposit-amount",name:"deposit-amount",type:"tel"},domProps:{value:t.form.amount},on:{input:function(e){e.target.composing||t.$set(t.form,"amount",e.target.value)}}})])]),t._v(" "),e("div",[e("label",{staticClass:"block text-sm font-medium leading-6 text-gray-900",attrs:{for:"wallet-address"}},[t._v("Wallet address")]),t._v(" "),e("div",{staticClass:"mt-2"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.wallet,expression:"form.wallet"}],staticClass:"block w-full rounded-md py-2.5 px-2.5 text-gray-900 shadow-sm placeholder:text-gray-400 border-[0.6px] bg-gray-100 border-gray-500 sm:text-sm sm:leading-6",attrs:{id:"wallet-address",name:"wallet-address",type:"tel"},domProps:{value:t.form.wallet},on:{input:function(e){e.target.composing||t.$set(t.form,"wallet",e.target.value)}}})])]),t._v(" "),e("div",[e("label",{staticClass:"block text-sm font-medium leading-6 text-gray-900",attrs:{for:"password"}},[t._v("Proof of deposit")]),t._v(" "),e("div",{staticClass:"mt-2"},[t.identificationFilePreview?t._e():e("div",{staticClass:"col-span-full"},[e("div",{staticClass:"mt-2 flex justify-center rounded-lg border border-dashed border-gray-900/25 px-6 py-10"},[e("div",{staticClass:"text-center"},[e("svg",{staticClass:"mx-auto h-12 w-12 text-gray-300",attrs:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"}},[e("path",{attrs:{"fill-rule":"evenodd",d:"M1.5 6a2.25 2.25 0 012.25-2.25h16.5A2.25 2.25 0 0122.5 6v12a2.25 2.25 0 01-2.25 2.25H3.75A2.25 2.25 0 011.5 18V6zM3 16.06V18c0 .414.336.75.75.75h16.5A.75.75 0 0021 18v-1.94l-2.69-2.689a1.5 1.5 0 00-2.12 0l-.88.879.97.97a.75.75 0 11-1.06 1.06l-5.16-5.159a1.5 1.5 0 00-2.12 0L3 16.061zm10.125-7.81a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0z","clip-rule":"evenodd"}})]),t._v(" "),e("div",{staticClass:"mt-4 flex text-sm leading-6 text-gray-600"},[e("label",{staticClass:"relative cursor-pointer rounded-md bg-white font-semibold text-indigo-600 focus-within:outline-none focus-within:ring-2 focus-within:ring-indigo-600 focus-within:ring-offset-2 hover:text-indigo-500",attrs:{for:"file-upload"}},[e("span",[t._v("Upload a file")]),t._v(" "),e("input",{staticClass:"sr-only",attrs:{id:"file-upload",name:"file-upload",type:"file"},on:{change:t.handleMeansOfIdentificationUpload}})]),t._v(" "),e("p",{staticClass:"pl-1"},[t._v("or drag and drop")])]),t._v(" "),e("p",{staticClass:"text-xs leading-5 text-gray-600"},[t._v("\n              PNG, JPG, GIF up to 10MB\n            ")])])])]),t._v(" "),t.docfileError?e("div",{staticClass:"error text-red-500 text-xs pt-2 font-medium"},[t._v("\n        "+t._s(t.docfileError)+"\n      ")]):t._e(),t._v(" "),t.isPdf&&t.identificationFilePreview?e("iframe",{staticStyle:{width:"100%",height:"500px"},attrs:{src:t.identificationFilePreview}}):t._e(),t._v(" "),!t.isPdf&&t.identificationFilePreview?e("img",{staticStyle:{"max-width":"100%","max-height":"500px"},attrs:{src:t.identificationFilePreview}}):t._e()])]),t._v(" "),e("div",[e("button",{staticClass:"flex w-full disabled:cursor-not-allowed disabled:opacity-25 justify-center rounded-md bg-yellow-600 px-3 py-2.5 text-sm font-semibold leading-6 text-black shadow-sm hover:bg-yellow-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",attrs:{type:"submit",disabled:!t.isFormEmpty||t.processing}},[t._v(t._s(t.processing?"processing..":"Submit"))])])])}),[],!1,null,null,null);e.default=component.exports}}]);