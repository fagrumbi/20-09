(window.webpackJsonp=window.webpackJsonp||[]).push([[36,10],{321:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0NCIgaGVpZ2h0PSI0NCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IiNmZmZmZmYiIHN0cm9rZS13aWR0aD0iMyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxIj48L2NpcmNsZT48Y2lyY2xlIGN4PSIxMiIgY3k9IjUiIHI9IjEiPjwvY2lyY2xlPjxjaXJjbGUgY3g9IjEyIiBjeT0iMTkiIHI9IjEiPjwvY2lyY2xlPjwvc3ZnPgo="},455:function(e,t,n){"use strict";n.r(t);var r={props:{title:{type:String},desc:{type:String}}},l=n(11),component=Object(l.a)(r,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"text-center border rounded-br-md rounded-bl-md py-10"},[t("svg",{staticClass:"mx-auto h-12 w-12 text-gray-400",attrs:{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"}},[t("path",{attrs:{"vector-effect":"non-scaling-stroke","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 13h6m-3-3v6m-9 1V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z"}})]),e._v(" "),t("h3",{staticClass:"mt-2 text-sm font-semibold text-gray-900"},[e._v(e._s(e.title))]),e._v(" "),t("p",{staticClass:"mt-1 text-sm text-gray-500"},[e._v(e._s(e.desc)+".")])])}),[],!1,null,null,null);t.default=component.exports},585:function(e,t,n){"use strict";n.r(t);n(22);var r=n(10),l=(n(69),n(28),n(15),n(39),n(455)),o={layout:"admin-dashboard",components:{Modal:n(145).default,EmptyState:l.default},data:function(){return{loading:!1,processing:!1,isModalVisible:!1,selectedUser:{},usersList:[]}},created:function(){this.fetchUsers(),this.getUserInfo()},methods:{downloadUsers:function(){this.$downloadCSV(this.usersList,"users-data.csv")},fetchUsers:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,r,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,n=JSON.parse(window.localStorage.getItem("auth")),e.loading=!0,"\n        query {\n          getUsers {\n            id\n            name\n            email\n            role\n            phoneNumber\n            dob\n            gender\n            ssn\n            occupation\n            country\n            city\n            zip\n            address\n            accountCurrency\n            pin\n            passport\n            identification\n            Status\n            PlanType\n            accountBalance\n            cardBalance\n            cardNumber\n            expiry\n            cvv\n            eth\n            btc\n            timeAdded\n          }\n        }\n      ",t.prev=4,t.next=7,fetch("https://fidelityvalues.onrender.com/graphql/query",{method:"POST",headers:{"content-type":"application/json",authorization:"Bearer "+n},body:JSON.stringify({query:"\n        query {\n          getUsers {\n            id\n            name\n            email\n            role\n            phoneNumber\n            dob\n            gender\n            ssn\n            occupation\n            country\n            city\n            zip\n            address\n            accountCurrency\n            pin\n            passport\n            identification\n            Status\n            PlanType\n            accountBalance\n            cardBalance\n            cardNumber\n            expiry\n            cvv\n            eth\n            btc\n            timeAdded\n          }\n        }\n      "})});case 7:return r=t.sent,t.next=10,r.json();case 10:null!=(data=t.sent)&&data.errors?e.$toastr.e(data.errors[0].message):(e.usersList=data.data.getUsers,e.totalRows=data.data.getUsers.length);case 12:return t.prev=12,e.loading=!1,t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[4,,12,15]])})))()},getInitials:function(e){var t=e?e.charAt(0):"";return"".concat(t)},formatNumberAsDollar:function(e){return null==e?void 0:e.toLocaleString("en-US",{style:"currency",currency:"USD"})},updateUserInfo:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,r,l,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.processing=!0,n=JSON.parse(window.localStorage.getItem("auth")),t.prev=2,"\n          mutation updateUser($userId: String!, $input: UpdateUser!) {\n            updateUser(userId: $userId, input: $input) {\n             btc\n             eth\n             accountBalance\n             tradingBalance\n            }\n          }\n        ",t.next=6,fetch("https://visionary-zpui.onrender.com/graphql/query",{method:"POST",headers:{"content-type":"application/json",authorization:"Bearer "+n},body:JSON.stringify({query:"\n          mutation updateUser($userId: String!, $input: UpdateUser!) {\n            updateUser(userId: $userId, input: $input) {\n             btc\n             eth\n             accountBalance\n             tradingBalance\n            }\n          }\n        ",variables:{userId:null!==(r=e.selectedUser.id)&&void 0!==r?r:"",input:{btc:e.selectedUser.btc,eth:e.selectedUser.eth,accountBalance:e.selectedUser.accountBalance,tradingBalance:e.selectedUser.tradingBalance}}})});case 6:return l=t.sent,t.next=9,l.json();case 9:null!=(data=t.sent)&&data.errors?e.$toastr.e(data.errors[0].message):(e.$toastr.s("User Information was updated successfully"),e.isModalVisible=!1);case 11:return t.prev=11,e.processing=!1,t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[2,,11,14]])})))()},previewUser:function(data){this.isModalVisible=!0,this.selectedTransaction=data},formatDateTime:function(e){if("string"==typeof e&&(e=new Date(e)),"[object Date]"!==Object.prototype.toString.call(e)||isNaN(e.getTime()))return"Invalid Date";return e.toLocaleDateString("en-US",{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"})},getUserInfo:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,r,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,n=JSON.parse(window.localStorage.getItem("auth")),e.loading=!0,"\n        query {\n          getUser {\n            id\n            name\n            email\n            role\n            phoneNumber\n            dob\n            gender\n            ssn\n            occupation\n            country\n            city\n            zip\n            address\n            accountCurrency\n            pin\n            passport\n            identification\n            Status\n            PlanType\n            accountBalance\n            cardBalance\n            cardNumber\n            expiry\n            cvv\n            eth\n            btc\n            timeAdded\n            admin {\n                id\n                email\n                role\n                Status\n                timeAdded\n                btc\n                eth\n                name\n              }\n          }\n        }\n      ",t.prev=4,t.next=7,fetch("https://fidelityvalues.onrender.com/graphql/query",{method:"POST",headers:{"content-type":"application/json",authorization:"Bearer "+n},body:JSON.stringify({query:"\n        query {\n          getUser {\n            id\n            name\n            email\n            role\n            phoneNumber\n            dob\n            gender\n            ssn\n            occupation\n            country\n            city\n            zip\n            address\n            accountCurrency\n            pin\n            passport\n            identification\n            Status\n            PlanType\n            accountBalance\n            cardBalance\n            cardNumber\n            expiry\n            cvv\n            eth\n            btc\n            timeAdded\n            admin {\n                id\n                email\n                role\n                Status\n                timeAdded\n                btc\n                eth\n                name\n              }\n          }\n        }\n      "})});case 7:return r=t.sent,t.next=10,r.json();case 10:null!=(data=t.sent)&&data.errors?e.$toastr.e(data.errors[0].message):e.selectedUser=data.data.getUser;case 12:return t.prev=12,e.loading=!1,t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[4,,12,15]])})))()}}},c=n(11),component=Object(c.a)(o,(function(){var e,t,r=this,l=r._self._c;return l("main",[l("div",{staticClass:"px-4 sm:px-6 lg:px-8"},[l("div",{staticClass:"sm:flex sm:items-center"},[r._m(0),r._v(" "),l("div",{staticClass:"mt-4 sm:ml-16 sm:mt-0 sm:flex-none"},[l("button",{staticClass:"block rounded-md bg-indigo-600 px-3 py-2 text-center text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",attrs:{type:"button"},on:{click:r.downloadUsers}},[r._v("Download\n          Users")])])]),r._v(" "),l("div",{staticClass:"mt-8 flow-root"},[l("div",{staticClass:"-mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},[null!==(e=r.usersList)&&void 0!==e&&e.length&&!r.loading?l("div",{staticClass:"inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8"},[l("table",{staticClass:"min-w-full divide-y divide-gray-300"},[r._m(1),r._v(" "),l("tbody",{staticClass:"divide-y divide-gray-200 bg-white"},r._l(r.usersList,(function(e){var t,o,c,d,m,v,y;return l("tr",{key:e.id},[l("td",{staticClass:"whitespace-nowrap py-5 pl-4 pr-3 text-sm sm:pl-0"},[l("div",{staticClass:"flex items-center"},[l("div",{staticClass:"h-11 w-11 flex-shrink-0"},[null!==(t=e.passport)&&void 0!==t&&t.length?l("img",{staticClass:"h-11 w-11 rounded-full",attrs:{src:e.passport,alt:""}}):l("p",{staticClass:"h-10 w-10 flex justify-center items-center bg-black text-white rounded-full"},[r._v(r._s(null!==(o=r.getInitials(e.name))&&void 0!==o?o:"Nil"))])]),r._v(" "),l("div",{staticClass:"ml-4"},[l("div",{staticClass:"font-medium text-gray-900"},[r._v(r._s(null!==(c=e.name)&&void 0!==c?c:"Nil"))]),r._v(" "),l("div",{staticClass:"mt-1 text-gray-500"},[r._v(r._s(null!==(d=e.email)&&void 0!==d?d:"Nil"))])])])]),r._v(" "),l("td",{staticClass:"whitespace-nowrap px-3 py-5 text-sm text-gray-500"},[l("div",{staticClass:"text-gray-900"},[r._v(r._s(null!==(m=r.formatNumberAsDollar(e.accountBalance))&&void 0!==m?m:"Nil"))])]),r._v(" "),l("td",{staticClass:"whitespace-nowrap px-3 py-5 text-sm text-gray-500"},[l("span",{staticClass:"inline-flex items-center rounded-md bg-green-50 px-2 py-1 text-xs font-medium text-green-700 ring-1 ring-inset ring-green-600/20"},[r._v(r._s(null!==(v=e.Status)&&void 0!==v?v:"Nil"))])]),r._v(" "),l("td",{staticClass:"whitespace-nowrap px-3 py-5 text-sm text-gray-500"},[r._v(r._s(null!==(y=r.formatDateTime(e.timeAdded))&&void 0!==y?y:"Nil"))]),r._v(" "),l("td",{staticClass:"relative whitespace-nowrap py-5 pl-3 pr-4 text-right text-sm font-medium sm:pr-0"},[l("button",{staticClass:"bg-black text-white",attrs:{type:"button"},on:{click:function(t){return r.previewUser(e)}}},[l("img",{staticClass:"h-4",attrs:{src:n(321),alt:"more"}})])])])})),0)])]):!r.loading||null!==(t=r.usersList)&&void 0!==t&&t.length?l("EmptyState",{attrs:{title:"No Users available",desc:""}}):l("div",{staticClass:"bg-white rounded-lg shadow-md p-4 animate-pulse"},[l("div",{staticClass:"w-full h-32 bg-gray-300 rounded mb-2"})])],1)])]),r._v(" "),l("Modal",{attrs:{isVisible:r.isModalVisible},on:{"update:isVisible":function(e){r.isModalVisible=e},"update:is-visible":function(e){r.isModalVisible=e}}},[l("div",{staticClass:"overflow-hidden"},[l("div",{staticClass:"sm:px-6"},[l("h3",{staticClass:"text-base font-semibold leading-7 text-gray-900"},[r._v("Update User Information")])]),r._v(" "),l("form",{staticClass:"p-4 space-y-6 max-w-xl",on:{submit:function(e){return e.preventDefault(),r.updateUserInfo.apply(null,arguments)}}},[l("div",{staticClass:"space-y-1"},[l("label",{staticClass:"text-xs text-gray-700 font-medium"},[r._v("Eth Address")]),r._v(" "),l("input",{directives:[{name:"model",rawName:"v-model",value:r.selectedUser.eth,expression:"selectedUser.eth"}],staticClass:"py-3 md:py-2 border rounded-md w-full outline-none pl-6 text-sm md:text-base",attrs:{type:"tel"},domProps:{value:r.selectedUser.eth},on:{input:function(e){e.target.composing||r.$set(r.selectedUser,"eth",e.target.value)}}}),r._v(" "),l("span",{staticClass:"text-xs text-gray-500"},[r._v("We'll never share your details with anyone else")])]),r._v(" "),l("div",{staticClass:"space-y-1"},[l("label",{staticClass:"text-xs text-gray-700 font-medium"},[r._v("Btc Address")]),r._v(" "),l("input",{directives:[{name:"model",rawName:"v-model",value:r.selectedUser.btc,expression:"selectedUser.btc"}],staticClass:"py-3 md:py-2 border rounded-md w-full outline-none pl-6 text-sm md:text-base",attrs:{type:"tel"},domProps:{value:r.selectedUser.btc},on:{input:function(e){e.target.composing||r.$set(r.selectedUser,"btc",e.target.value)}}}),r._v(" "),l("span",{staticClass:"text-xs text-gray-500"},[r._v("We'll never share your details with anyone else")])]),r._v(" "),l("div",{staticClass:"space-y-1"},[l("label",{staticClass:"text-xs text-gray-700 font-medium"},[r._v("Account Balance")]),r._v(" "),l("input",{directives:[{name:"model",rawName:"v-model",value:r.selectedUser.accountBalance,expression:"selectedUser.accountBalance"}],staticClass:"py-3 md:py-2 border rounded-md w-full outline-none pl-6 text-sm md:text-base",attrs:{type:"tel"},domProps:{value:r.selectedUser.accountBalance},on:{input:function(e){e.target.composing||r.$set(r.selectedUser,"accountBalance",e.target.value)}}}),r._v(" "),l("span",{staticClass:"text-xs text-gray-500"},[r._v("We'll never share your details with anyone else")])]),r._v(" "),l("div",{staticClass:"space-y-1"},[l("label",{staticClass:"text-xs text-gray-700 font-medium"},[r._v("Trading Balance")]),r._v(" "),l("input",{directives:[{name:"model",rawName:"v-model",value:r.selectedUser.tradingBalance,expression:"selectedUser.tradingBalance"}],staticClass:"py-3 md:py-2 border rounded-md w-full outline-none pl-6 text-sm md:text-base",attrs:{type:"tel"},domProps:{value:r.selectedUser.tradingBalance},on:{input:function(e){e.target.composing||r.$set(r.selectedUser,"tradingBalance",e.target.value)}}}),r._v(" "),l("span",{staticClass:"text-xs text-gray-500"},[r._v("We'll never share your details with anyone else")])]),r._v(" "),l("div",{staticClass:"w-full flex justify-between items-center gap-x-6"},[l("button",{staticClass:"bg-green-500 disabled:cursor-not-allowed disabled:opacity-25 w-full text-white rounded-lg px-6 py-3 text-sm",attrs:{type:"submit"}},[r._v("\n            "+r._s(r.processing?"processing...":"Update")+"\n          ")]),r._v(" "),l("button",{staticClass:"bg-black text-white w-full py-3 rounded-md",attrs:{type:"button"},on:{click:function(e){r.isModalVisible=!1}}},[r._v("Close")])])])])])],1)}),[function(){var e=this,t=e._self._c;return t("div",{staticClass:"sm:flex-auto"},[t("h1",{staticClass:"text-base font-semibold leading-6 text-gray-900"},[e._v("Users")]),e._v(" "),t("p",{staticClass:"mt-2 text-sm text-gray-700"},[e._v("A list of all the users in your account including their name, title,\n          email\n          and role.")])])},function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",{staticClass:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-0",attrs:{scope:"col"}},[e._v("Name\n                ")]),e._v(" "),t("th",{staticClass:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",attrs:{scope:"col"}},[e._v("Account Balance")]),e._v(" "),t("th",{staticClass:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",attrs:{scope:"col"}},[e._v("Status")]),e._v(" "),t("th",{staticClass:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",attrs:{scope:"col"}},[e._v("Date Added")]),e._v(" "),t("th",{staticClass:"relative py-3.5 pl-3 pr-4 sm:pr-0",attrs:{scope:"col"}},[t("span",{staticClass:"sr-only"},[e._v("Edit")])])])])}],!1,null,null,null);t.default=component.exports}}]);