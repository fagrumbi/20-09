(window.webpackJsonp=window.webpackJsonp||[]).push([[39,11],{443:function(t,e,n){"use strict";n.r(e);var r={props:{title:{type:String},desc:{type:String}}},o=n(16),component=Object(o.a)(r,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"text-center border rounded-br-md rounded-bl-md py-10"},[e("svg",{staticClass:"mx-auto h-12 w-12 text-gray-400",attrs:{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"}},[e("path",{attrs:{"vector-effect":"non-scaling-stroke","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 13h6m-3-3v6m-9 1V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z"}})]),t._v(" "),e("h3",{staticClass:"mt-2 text-sm font-semibold text-gray-900"},[t._v(t._s(t.title))]),t._v(" "),e("p",{staticClass:"mt-1 text-sm text-gray-500"},[t._v(t._s(t.desc)+".")])])}),[],!1,null,null,null);e.default=component.exports},685:function(t,e,n){"use strict";n.r(e);n(20);var r=n(6),o=(n(54),n(21),n(10),n(443)),c=n(128),l=n.n(c),d={layout:"admin-dashboard",head:function(){return{title:"Bastons Banks | Admin Transactions List",meta:[{charset:"utf-8"},{name:"viewport",content:"width=device-width, initial-scale=1"},{hid:"description",name:"description",content:"Mobile Banking, Credit Cards, Mortgages, Auto Loan"},{hid:"keywords",name:"keywords",content:"Mobile Banking, Credit Cards, Mortgages, Auto Loan"},{hid:"og:title",property:"og:title",content:"Bastons Banks | Admin Transactions List"},{hid:"og:description",property:"og:description",content:"Mobile Banking, Credit Cards, Mortgages, Auto Loan"},{hid:"og:type",property:"og:type",content:"website"},{hid:"og:url",property:"og:url",content:"https://www.bastonsbanks.com/admin/dashboard/transactions"},{hid:"og:image",property:"og:image",content:"@/assets/img/preview.png"},{hid:"twitter:card",name:"twitter:card",content:""},{hid:"twitter:title",name:"twitter:title",content:"Bastons Banks | Admin Transactions List"},{hid:"twitter:description",name:"twitter:description",content:"Mobile Banking, Credit Cards, Mortgages, Auto Loan"},{hid:"twitter:image",name:"twitter:image",content:"@/assets/img/preview.png"}],link:[{rel:"icon",type:"image/x-icon",href:"/favicon.ico"}]}},data:function(){return{loading:!1,transactionsList:[]}},methods:{downloadWithdrawals:function(){this.$downloadCSV(this.transactionsList,"withdrawals-data.csv")},fetchTransactions:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,n=JSON.parse(sessionStorage.getItem("auth")),t.loading=!0,e.prev=5,e.next=8,fetch("https://fidelityvalues.onrender.com/graphql/query",{method:"POST",headers:{"content-type":"application/json",authorization:"Bearer "+n},body:JSON.stringify({query:"\n        query {\n          getTransactions {\n            id\n            amount\n            beneficiaryName\n            beneficiaryAccountNumber\n            receivingBankName\n            routingNumber\n            wallet\n            transactionType\n            transactionStatus\n            user {\n              id\n              name\n              email\n              role\n              phoneNumber\n              dob\n              gender\n              ssn\n              occupation\n              country\n              city\n              zip\n              address\n              accountCurrency\n              pin\n              passport\n              identification\n              Status\n              PlanType\n              accountBalance\n              cardBalance\n              cardNumber\n              expiry\n              cvv\n              eth\n              btc\n              timeAdded\n            }\n            proof\n            timeAdded\n          }\n        }\n      "})});case 8:return r=e.sent,e.next=11,r.json();case 11:null!=(data=e.sent)&&data.errors?t.$toastr.e(data.errors[0].message):t.transactionsList=data.data.getTransactions;case 13:return e.prev=13,t.loading=!1,e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[5,,13,16]])})))()},handleAction:function(data,t){var e=this;l.a.fire({title:"".concat("approve"===t?"Approve":"Reject"," Withdrawal"),text:"Please Note: You won't be able to revert this!",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, Proceed!"}).then((function(n){n.value?e.processTransaction(data.id,t):e.$swal("Cancelled","Action was cancelled","info")}))},processTransaction:function(t,e){var n=this;return Object(r.a)(regeneratorRuntime.mark((function r(){var o,c,l,data;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n.processing=!0,o=JSON.parse(sessionStorage.getItem("auth")),c="approve"===e?"Approved":"reject"===e?"Declined":"Pending",r.prev=4,r.next=8,fetch("https://fidelityvalues.onrender.com/graphql/query",{method:"POST",headers:{"content-type":"application/json",authorization:"Bearer "+o},body:JSON.stringify({query:"\n            mutation ProcessTransaction($transactionID: String!, $status: TransactionStatus!) {\n              processTransaction(transactionID: $transactionID, status: $status)\n            }\n          ",variables:{transactionID:t,status:c}})});case 8:return l=r.sent,r.next=11,l.json();case 11:null!=(data=r.sent)&&data.errors?n.$toastr.e(data.errors[0].message):n.$toastr.s("You have successfully ".concat("approve"===e?"Approved":"Rejected"," this transaction."));case 13:return r.prev=13,n.processing=!1,r.finish(13);case 16:case"end":return r.stop()}}),r,null,[[4,,13,16]])})))()}},mounted:function(){this.fetchTransactions()},component:{EmptyState:o.default}},m=n(16),component=Object(m.a)(d,(function(){var t,e,n=this,r=n._self._c;return r("div",{staticClass:"px-4 sm:px-6 lg:px-8"},[n._m(0),n._v(" "),r("div",{staticClass:"mt-8 flow-root"},[r("div",{staticClass:"-mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},[null!==(t=n.transactionsList)&&void 0!==t&&t.length&&!n.loading?r("div",{staticClass:"inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8"},[r("table",{staticClass:"min-w-full divide-y divide-gray-300"},[n._m(1),n._v(" "),r("tbody",{staticClass:"bg-white"},n._l(n.transactionsList,(function(t){var e;return r("tr",{key:t.id,staticClass:"even:bg-gray-50"},[r("td",{staticClass:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-3"},[r("div",[t.user.name?r("span",[n._v(n._s(t.user.name))]):r("span",[n._v("Nil")])]),n._v(" "),r("div",[t.user.email?r("span",[n._v(n._s(t.user.email))]):r("span",[n._v("Nil")])])]),n._v(" "),r("td",{staticClass:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},[r("div",[t.beneficiaryAccountNumber?r("span",[n._v(n._s(t.beneficiaryAccountNumber))]):r("span",[n._v("Nil")])])]),n._v(" "),r("td",{staticClass:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},[t.transactionType?r("span",[n._v(n._s(t.transactionType))]):r("span",[n._v("Nil")])]),n._v(" "),r("td",{staticClass:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},[n._v(n._s(null!==(e=t.transactionStatus)&&void 0!==e?e:"Nil"))]),n._v(" "),r("td",{staticClass:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-3"},[r("div",{staticClass:"py-4 flex justify-center items-center"},["Pending"===(null==t?void 0:t.transactionStatus)?r("div",{staticClass:"lg:flex items-center lg:gap-x-3 space-y-3 flex-wrap"},[r("button",{staticClass:"text-white text-xs bg-green-500 w-full py-1.5 rounded-lg",on:{click:function(e){return n.handleAction(t,"approve")}}},[n._v("\n                      Approve\n                    ")]),n._v(" "),r("button",{staticClass:"text-white text-xs bg-red-500 w-full py-1.5 rounded-lg",on:{click:function(e){return n.handleAction(t,"reject")}}},[n._v("\n                      Reject\n                    ")])]):r("div",[r("button",{staticClass:"bg-black text-white py-2 text-xs px-3 rounded-lg",attrs:{disabled:""}},[n._v("\n                      Completed\n                    ")])])])])])})),0)])]):!n.loading||null!==(e=n.transactionsList)&&void 0!==e&&e.length?r("EmptyState",{attrs:{title:"No Transactions available",desc:""}}):r("div",{staticClass:"bg-white rounded-lg shadow-md p-4 animate-pulse"},[r("div",{staticClass:"w-full h-32 bg-gray-300 rounded mb-2"})])],1)])])}),[function(){var t=this,e=t._self._c;return e("div",{staticClass:"sm:flex sm:items-center"},[e("div",{staticClass:"sm:flex-auto"},[e("h1",{staticClass:"text-base font-semibold leading-6 text-gray-900"},[t._v("Transactions")]),t._v(" "),e("p",{staticClass:"mt-2 text-sm text-gray-700"},[t._v("A list of all the transactions including withdrawals and deposits,\n        title, email and role.")])]),t._v(" "),e("div",{staticClass:"mt-4 sm:ml-16 sm:mt-0 sm:flex-none"},[e("button",{staticClass:"block rounded-md bg-indigo-600 px-3 py-2 text-center text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",attrs:{type:"button"}},[t._v("Export\n        Transactions")])])])},function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",{staticClass:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-3",attrs:{scope:"col"}},[t._v("User")]),t._v(" "),e("th",{staticClass:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",attrs:{scope:"col"}},[t._v("Account Name")]),t._v(" "),e("th",{staticClass:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",attrs:{scope:"col"}},[t._v("Transaction Type\n              ")]),t._v(" "),e("th",{staticClass:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",attrs:{scope:"col"}},[t._v("Transaction Status\n              ")]),t._v(" "),e("th",{staticClass:"relative py-3.5 pl-3 pr-4 sm:pr-3",attrs:{scope:"col"}},[e("span",{staticClass:"sr-only"},[t._v("Edit")])])])])}],!1,null,null,null);e.default=component.exports}}]);